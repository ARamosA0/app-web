<div class="container mt-4">
    <h2>Items</h2>
  
    <!-- Formulario para crear/editar un item -->
    <form [formGroup]="formularioPelicula" (ngSubmit)="currentItem._id ? updateItem(currentItem._id, currentItem) : createItem(currentItem)">
      <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" class="form-control" formControlName="name" [(ngModel)]="currentItem.name" name="name" required>
        <span *ngIf="this.formularioPelicula.get('name')?.errors?.['required']">
            (El nombre no puede estar vacio)
        </span>
      </div>
  
      <div class="form-group">
        <label for="description">Director:</label>
        <input type="text" class="form-control" formControlName="director" [(ngModel)]="currentItem.director" name="director" required>
        <span *ngIf="this.formularioPelicula.get('director')?.errors?.['required']">
            (El director no puede estar vacio)
        </span>
      </div>
  
      <div class="form-group">
        <label for="description">Fecha de Estreno:</label>
        <input type="date" class="form-control" formControlName="fecha_estreno" [(ngModel)]="currentItem.fecha_estreno" name="fecha_estreno" required>
        <span *ngIf="this.formularioPelicula.get('fecha_estreno')?.errors?.['required']">
            (La fecha de estreno no puede estar vacia)
        </span>
      </div>
      
      <div class="form-group">
        <label for="description">Imagen:</label>
        <input type="text" class="form-control" formControlName="imagen" [(ngModel)]="currentItem.imagen" name="imagen" required>
        <span *ngIf="this.formularioPelicula.get('imagen')?.errors?.['required']">
            (La imagen no puede estar vacia)
        </span>
      </div>

      <div class="form-group">
        <label for="description">Descripcion:</label>
        <input type="text" class="form-control" formControlName="description" [(ngModel)]="currentItem.description" name="description" required>
        <span *ngIf="this.formularioPelicula.get('description')?.errors?.['required']">
            (La descripcion no puede estar vacia)
        </span>
      </div>

      <button type="submit" class="btn btn-primary">{{currentItem._id ? 'Update' : 'Add'}}</button>

      

    </form>
  
    <hr>
  
    <!-- Lista de items -->
    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Director</th>
          <th>Fecha Estreno</th>
          <th>Imagen</th>
          <th>Descripcion</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of items">
          <td>{{ item.name }}</td>
          <td>{{ item.director }}</td>
          <td>{{ item.fecha_estreno }}</td>
          <td><img src="{{ item.imagen }}" width="350" height="200"></td>
          <td>{{ item.description }}</td>
          <td>
            <button class="btn btn-sm btn-primary" (click)="editItem(item._id)">Edit</button>
            <button class="btn btn-sm btn-danger" (click)="deleteItem(item._id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
    <div >
        <app-alert *ngIf="showMsgPost" mensaje="Se agrego una pelicula" color="alert-success"></app-alert>
    </div>
    <div >
        <app-alert *ngIf="showMsgPut" mensaje="Se edito una pelicula" color="alert-success"></app-alert>
    </div>
  </div>